---
title: Ciência de Dados para Todos (Data Science For All) - 2019.2 - Análise da Produção
  Científica e Acadêmica da Universidade de Brasília - Relatório - Departamento de
  Ciência da Computação da UnB
author: "Luan Mendes Gonçalves Freitas - 15/0015585"
date: "25/10/2019"
output:
  word_document:
    toc: yes
    toc_depth: '4'
  pdf_document:
    df_print: paged
    fig_caption: yes
    keep_tex: yes
    number_sections: yes
    toc: yes
    toc_depth: 4
  html_document:
    df_print: paged
    keep_tex: yes
    number_sections: yes
    toc: yes
    toc_depth: 4
header-includes:
- \usepackage{graphicx}
- \usepackage{url}
- \usepackage{float}
- \usepackage{listings}
- \usepackage{color}
- \usepackage{colortbl}
- \usepackage{multirow}
- \usepackage{todonotes}
- \usepackage{algorithmic}
- \usepackage{algorithm}
- \usepackage{hyperref}
- \usepackage{enumitem}
- \usepackage{multirow}
- \usepackage{graphicx}
- \usepackage{indentfirst}
- \usepackage{multicol,lipsum}
- \usepackage{natbib}
- \usepackage{lscape}
- \usepackage{longtable}
- \usepackage{mathtools}
- \usepackage{amsmath}
- \setlength{\parindent}{2em}
bibliography: bibliography.bib
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
\newpage
# Introdução

Este relatório apresenta uma análise da produção científica e acadêmica de dados coletados da CAPES (Coordenação de Aperfeiçoamento de Pessoal de Nível Superior), à respeito de programas de pós-graduação da disciplina Tópicos Avançados em Computadores Data Science For All (Ciência de Dados para Todos) - Turma D - 2019.2, ministrada por Jorge Henrique Cabral Fernandes e Ricardo Barros Sampaio, do Departamento de Ciência da Computação da Universidade de Brasília.

O tema de estudo escolhido para realização da prática de ciência de dados foi o cenário atual da Pós-Graduação Brasileira, para que seus dados sejam processados e estudados com o objetivo de se retirar análises a respeito da qualidade, relevância, e produtividade dos programas de pós-graduação brasileiros.

Órgão Capes Sucupira já coleta informações, para realizar análises e avaliações e ser a base de referência do Sistema Nacional de Pós-Graduação (SNPG). A Plataforma disponibiliza em tempo real e com muito mais transparência as informações, processos e procedimentos que a CAPES realiza no SNPG para toda a comunidade acadêmica. Igualmente, a Plataforma propiciará a parte gerencial-operacional de todos os processos e permitirá maior participação das pró-reitorias e coordenadores de programas de pós-graduação [@sucupira].

O tema de estudo escolhido tem como objetivo apresentar as análises descritivas, quantitativas e de modelagem realizadas dos programas de pós-graduações da brasileira, seguindo o modelo de metodologia CRISP-DM. O programa escolhido é \textbf{Geotecnia (53001010032P2)} da área de conhecimento de Engenharias I [@sucupira_geotecnia].


# Metodologia

## O que é ciência?

Ciência é o conhecimento que explica os fenômenos obedecendo a leis que foram verificadas por métodos experimentais. Aristóteles define a ciência como o "conhecimento das causas pelas causas. É o conhecimento demonstrativo".

A ciência é composta por três componentes: a observação, a experimentação e as leis. Visa a união entre o conhecimento teórico, a prática e a técnica. Não se utiliza de suposições, mas da comprovação após a aplicação do método científico.

Foi o próprio Aristóteles quem definiu que as ciências (no plural) estão relacionadas à maneira de realização do ideal de cientificidade de acordo com os fatos investigados e os métodos empregados [@ciencia].

## O que é ciência no Brasil?

Diz-se que o sistema de ciência e tecnologia do Brasil começa oficialmente com o CNPq (Conselho Nacional de Desenvolvimento Científico e Tecnológico), criado em 1951 para incentivar nosso progresso na área. Claro, já havia antes instituições de destaque: do Observatório Nacional no Rio (ainda do tempo do Império) às universidades federal do Rio de Janeiro (UFRJ) e estadual de São Paulo (USP), fundadas em 1920 e 1934. De qualquer forma, trata-se de uma história muito jovem. Basta lembrar que os Estados Unidos viram sua prestigiosa Universidade Harvard surgir em 1636. Ou seja: estamos correndo atrás, e não faz pouco tempo. A boa notícia é que nos últimos 20 anos a coisa finalmente parece ter engrenado.

Passamos da 21ª para a 13ª posição no ranking mundial de produção científica (veja ao lado) e levantamentos já indicam que o Brasil responde por 2,7\% dos trabalhos científicos publicados no mundo (em 1994, era apenas 0,7\%). "Se for pensar que o PIB do Brasil [Produto Interno Bruto, soma de todas as riquezas produzidas pelo país em um ano] representa cerca de 2,9\% do mundo, você vê que nossa ciência já atingiu um tamanho proporcional à nossa economia", diz Marco Antonio Raupp, ministro da Ciência, Tecnologia e Inovação. Em evento recente na Sociedade Brasileira para o Progresso da Ciência (SBPC), Raupp mostrou que os investimentos do governo na área foram de R\$ 1,1 bilhão em 2000 para R\$ 12,7 bilhões em 2013. "Nunca antes na história desse país, como costuma dizer nosso ex-presidente", brincou o ministro.

Mas nem tudo são flores. Pra começar, a parcela do PIB investida em pesquisa e desenvolvimento, 1,16\%, ainda é pequena se comparada com a de nações desenvolvidas como a Alemanha (2,7\%) ou EUA (2,8\%) - e não vem crescendo expressivamente na última década. Isso deixa muito trabalho bom de fora. "Se a taxa de projetos aprovados no CNPq é de 50\% e a taxa de financiados é de 20\%, nos sentimos no direito de pleitear mais", diz Helena Nader, presidente da SBPC.

Além do dinheiro, há entraves puramente burocráticos. Não à toa está entre as prioridades do governo fazer aprovar no Congresso Nacional um Código Nacional de Ciência, Tecnologia e Inovação. Trata-se de um conjunto de leis que deve resolver alguns desses problemas - mas não todos. Até mesmo o ex-jogador e deputado federal Romário de Souza Faria (PSB-RJ) anda enchendo a bola dos cientistas, com um projeto de lei para facilitar as importações, uma das piores vias-crúcis de quem quer fazer pesquisa de ponta no país. São sinais alvissareiros: pouco a pouco, os freios da ciência nacional começam a ser colocados de lado, após décadas de protestos dos meios acadêmicos.

Mas há muito a ser feito: de facilitar o acesso de cientistas a recursos a fazer o governo se mexer quando surgem oportunidades em parcerias científicas internacionais. Neste Dossiê, mostramos algumas das principais dificuldades ainda enfrentadas pelos pesquisadores brasileiros, e como o país se prepara para lidar com elas.

## O que é CRISP-DM?
\textbf{CRISP-DM} (Cross-Industry Standard Process for Data Mining) é um modelo de análise de mineração de dados, feita de forma sistemática, sendo amplamente utilizada por ser flexível, podendo ser aplicada em qualquer negócio, e sua execução não ser dependente de ferramentas [@crispdm]. As fases que compõem o CRISP-DM são descritas abaixo e exemplificadas na figura \ref{diagramaCRISPDM} :

* Entendimento do negócio: foca em entender o objetivo do projeto a partir de uma perspectiva
de negócios, definindo um plano preliminar para atingir os objetivos. Pode ser subdividido em três
atividades:
  + Definir objetivos: Descrever seu objetivo principal a partir de uma perspectiva de negócios.
  + Produzir plano de projeto: Descrever o plano para atingir os objetivos de mineração de dados e negócios.
  + Critérios de sucesso nos negócios: Defenir os critérios que serão usados para determinar se o projeto foi bem-sucedido do ponto de vista comercial

* Entendimento dos dados: Recolhimento de dados e inicio de atividades para familiarização com os
dados, identificando problemas ou conjuntos interessantes. Pode ser subdividido em cinco atividades:
  + Coleta dos dados: Liste as fontes de dados adquiridas juntamente com seus locais, os métodos usados para adquiri-las e quaisquer problemas encontrados.
  + Descrição dos dados: Descrever os dados que foram adquiridos, incluindo seu formato, sua quantidade (por exemplo, o número de registros e campos em cada tabela)
  + Exploração dos dados: Descrever os resultados de sua exploração de dados, incluindo as primeiras descobertas ou hipóteses iniciais e seu impacto no restante do projeto.
  + Qualidade dos dados: Analisar a qualidade dos dados recolhidos.

* Preparação dos dados: Construção do conjunto de dados final a partir dos dados iniciais. Normalmente
ocorre várias vezes no processo. Pode ser subdividido em cinco atividades:
  + Seleção dos dados: Liste os dados a serem incluídos / excluídos e os motivos dessas decisões.
  + Limpeza dos dados: Descrever quais decisões e ações você tomou para solucionar problemas de qualidade de dados. 
  + Construção dos dados: Descrever operações construtivas de preparação de dados, como a produção de atributos derivados ou novos registros inteiros ou valores transformados para atributos existentes.
  + Integração dos dados: Integre fontes e armazene o resultado (novas tabelas e registros).
  + Formatação dos dados: Organização e alterações na estrutura de dados para adequação ao método
de data mining escolhido.

* Modelagem: Árias técnicas de modelagem são aplicadas, e seus parâmetros calibrados para otimização.
Assim, é comum retornar à Preparação dos Dados durante essa fase. Pode ser dividido em quatro atividades:
  + Seleção das técnicas de modelagem: Escolher e ajustar os parâmetros do algoritmo a ser utilizado.
  + Realização de testes de modelagem: Descrever o plano pretendido para treinar, testar e avaliar os modelos
  + Modelo de construção: Definir parâmetros iniciais e motivos do documento para escolher esses valores.
  + Avaliação do modelo: Avalie o resultado com relação aos critérios de avaliação. Classifique os resultados com relação aos critérios de sucesso e avaliação e selecione os melhores modelos.

* Avaliação: É construído um modelo que parece ter grande qualidade de uma perspectiva de análise de dados. No entanto, é necessário verificar se o modelo atinge os objetivos do negócio. Pode ser dividido em quarto atividades:
  + Avalie os resultados: entenda o resultado da mineração de dados. Verifique o impacto da meta de mineração de dados.
  + Revisão do processo: Resuma a revisão do processo (atividades que foram perdidas ou devem ser repetidas)
  + Determine as próximas etapas: Analise o potencial de implantação de cada resultado. Estimar o potencial de melhoria do processo atual.
  + Decisão: De acordo com os resultados e a revisão do processo, é decidido como proceder para a próxima etapa (recursos e orçamento restantes)

* Implantação: O conhecimento adquirido pelo modelo é organizado e apresentado de uma maneira que
o cliente possa utilizar.
  + Planejar a implantação: Identifique possíveis problemas ao: implantar os resultados da mineração de dados
  + Planejar monitoramento e manutenção: O que poderia mudar no ambiente? Como a precisão será monitorada?
  + Produzir um relatório final: Identificar os relatórios necessários (apresentação de slides, resumo de gerenciamento, descobertas detalhadas, explicação de modelos etc.). Quão bem os objetivos iniciais de mineração de dados foram alcançados.
  + Revisão do projeto: Entrevistar as pessoas envolvidas no projeto. Entreviste usuários finais. O que poderia ter sido feito melhor? Eles precisam de suporte adicional? Resuma o feedback e escreva a documentação da experiência

![Diagrama da CRISP-DM \label{diagramaCRISPDM} @bharat_crispdm_2019](crispdm.jpeg) 

\newpage

# Fase 1 - Entendimento do Negócio

## O que é o Sistema Nacional de Pós-Graduação? (Contextualização)

O Sistema de Avaliação da Pós-graduação foi implantado pela CAPES em 1976 e desde então vem cumprindo papel de fundamental importância para o desenvolvimento da pós-graduação e da pesquisa científica e tecnológica no Brasil. Abrange dois processos conduzidos por comissões de consultores do mais alto nível, vinculados a instituições de ensino das diferentes regiões do país: a Avaliação das Propostas de Cursos Novos e a Avaliação dos Programas de Pós-graduação [@capes].

A Avaliação das Propostas de Cursos Novos é parte do rito estabelecido para a admissão de novos programas e cursos como integrantes do Sistema Nacional de Pós-graduação, SNPG. Ao avaliar as propostas de cursos novos, a CAPES verifica a qualidade de tais propostas e se elas atendem ao padrão de qualidade requerido desse nível de formação. Os resultados desse processo são encaminhados ao Conselho Nacional de Educação para fundamentar a deliberação desse órgão sobre o reconhecimento dos novos cursos.

A Avaliação dos Programas de Pós-graduação compreende os processos de Acompanhamento Anual e de Avaliação Trienal do desempenho dos programas e cursos que integram o Sistema Nacional de Pós-graduação, SNPG.

O Acompanhamento Anual é realizado no período compreendido entre os anos de realização das avaliações trienais. Tem por objetivo o estabelecimento de um diálogo entre a CAPES e as instituições promotoras de cursos de mestrado e doutorado com vistas à orientação da atuação dos programas de forma que possam elevar a qualidade de seu desempenho e superar os problemas que eventualmente estejam a enfrentar - se possível antes da Avaliação Trienal subseqüente. O Acompanhamento não implica na atribuição de conceitos aos programas, mas apenas na apresentação de um parecer com os comentários considerados pertinentes pela Comissão de Área, e não enseja que seus resultados sejam contestados mediante a apresentação de recursos ou pedidos de reconsideração.

A Avaliação Trienal é realizada ao final de cada triênio, sendo o ano de sua realização estabelecido pela seqüência histórica do processo de avaliação da CAPES. Os resultados da avaliação de cada programa são apresentados na "Ficha de Avaliação" definida pelo CTC, de que constam, no que se refere aos vários quesitos e itens avaliados, os atributos a ele consignados, com os respectivos comentários e justificativas da comissão avaliadora, e, ao final, o conceito correspondente ao seu desempenho no triênio, na escala de 1 a 7 adotada. Tais resultados podem ser contestados pelas instituições de ensino mediante a apresentação de recurso contra a decisão inicial comunicada pela CAPES e, uma vez homologados pelo Ministro da Educação, são válidos até a homologação dos resultados da Avaliação Trienal subseqüente. Os resultados da Avaliação Trienal realizada pela CAPES, além de indicarem a qualidade do desempenho e a posição relativa de cada programa no contexto de sua respectiva área, servem de referência para as decisões dos órgãos governamentais de investimento na pesquisa e na pós-graduação e fundamentam as deliberações do Conselho Nacional de Educação sobre quais cursos de mestrado e de doutorado obterão, para vigência no triênio seguinte, a renovação de seu "reconhecimento".

## A UnB dentro do Sistema Nacional de Pós-Graduação (Contextualização)

Historicamente, o desenvolvimento da ciência na UnB é realizado nas unidades acadêmicas com apoio, acompanhamento e supervisão do Decanato de Pesquisa e Pós-Graduação (DPP). A atuação do decanato promove todas as áreas do conhecimento com o auxílio de diretorias específicas para pesquisa, desenvolvimento institucional e inovação e iniciação científica [@unb].

Para estimular a pesquisa e a inovação e tornar a Universidade de Brasília uma referência na área, foi criado, no início de 2017, o Decanato de Pesquisa e Inovação (DPI). Com a mudança, o DPP passou a se chamar Decanato de Pós-Graduação (DPG). A intenção é que as pró-reitorias somem expertises em seus respectivos setores de atuação e possam conduzir a UnB adiante na produção científica.  

Editais próprios e de agências de fomento como CNPq, Capes e FAPDF são responsáveis por financiar parte significativa das pesquisas na Universidade. O DPG anuncia em sua página as publicações internas e as principais chamadas públicas que podem beneficiar a comunidade científica com a concessão de aportes financeiros, equipamentos, bolsas e realização e participação em eventos científicos.

Algumas das principais definições estratégicas para o progresso da ciência na UnB são realizadas no Conselho de Ensino, Pesquisa e Extensão (Cepe), com apoio da Câmara de Pesquisa e Pós-Graduação (CPP). Essas estruturas colegiadas permitem decisões democráticas com participação ativa dos segmentos interessados.

De acordo com a plataforma sucupira, existem 97 programas em funcionamento na Universidade de Brasília
no momento. As notas por programa se separam da seguinte maneira:

* 5 programas com nota 7: Antropologia, Desenvolvimento Sustentável, Geologia, Matemática e Sociologia.
* 10 programas com nota 6: Geotecnia, Ciência Política, Ciências Biológicas (Biologia Molecular), Direito e outros.
* 18 programas com nota 5: Administração, Administração (pública), Bioética, Ciências animais, Ciências da informação, Ciências da saúde e outros.
* 46 programas com nota 4: Ensino de Ciências Ambientais em Rede Nacional, Agronegócios, Agronomia, Arquitetura E Urbanismo, Artes, Artes Cênicas, Biologia Animal, Biologia Microbiana e outros.

\newpage
# Fase 2 - Entendimento dos Dados

## Coleta inicial dos dados
Os arquivos json para análise foram fornecidos na plataforma unb.elattes da UnB, que disponibiliza de forma acessível informações relevantes dos programas avaliados. Os dados fornecem informações entre os anos de 2010 e 2019 [@unb_elattes_2011].

```{r, echo=FALSE, message=FALSE, warning=FALSE}
source("headerAdvise.R")
source("headerGraph.R")
source("headerProfile.R")
source("headerPublic.R")
```

**Perfil profissional dos docentes vinculados às pós-graduações**
```{r}
file.info("Geotecnia/profile.json")
```

O arquivo profile.json apresenta dados sobre o perfil de todos os docentes vinculados a programas de
pós-graduação da UnB, entre 2010 e 2019. Esse arquivo foi fornecido pelos docentes responsáveis pela
disciplina.

**Orientações de mestrado e doutorado realizadas pelos docentes vinculados às pós-graduações**
```{r}
file.info("Geotecnia/advise.json")
```

O arquivo advise.json apresenta dados sobre o orientações de mestrado e doutorado feitas por todos os
docentes vinculados a programas de pós-graduação da UnB, entre 2010 e 2019. Esse arquivo foi fornecido
pelos docentes responsáveis pela disciplina.

**Produção bibliográfica gerada pelos docentes vinculados às pós-graduações**
```{r}
file.info("Geotecnia/publication.json")
```

O arquivo publication.json apresenta dados sobre a produção bibliográfica gerada por todos os docentes
vinculados a programas de pós-graduação da UnB, entre 2010 e 2019.

**Agrupamento dos docentes conforme áreas de atuação**
```{r}
file.info("Geotecnia/graph.json")
```

O arquivos graph.json de Geotecnia apresenta redes de colaboração na co-autoria de artigos científicos, feitas
entre os docentes vinculados a programas de pós-graduação da UnB, entre 2010 e 2019.

## Descrição dos Dados

Para ler, manipular, analisar e visualizar estes dados, serão utilizadas as seguintes bibliotecas:
```{r}
library(tidyverse)
library(jsonlite)
library(listviewer)
library(scales)
library(dplyr)
library(readxl)
library(readr)
library(readtext)
library(ggplot2)
library(igraph)
library(knitr)
```
Com essas bibliotecas habilitadas será possível de responder e determinar qual o volume de dados, a estrutura
dos dados (tipos), codificações usadas, entre outras atividades importantes para análise dos dados.

**Descrição dos dados do perfil**

O arquivo profile.json, que contém dados que caracterizam o perfil profissional de todos os docentes do grupo
sob análise, podem ser lido por meio do comando seguinte:
```{r}
profile <- fromJSON("Geotecnia/profile.json")
```
A quantidade de docentes de Geotecnia sob análise é apresentada a seguir.
```{r}
length(profile)
```

Para apresentar os dados que estão contido nos dados de perfil dos docentes, vamos usar a função glimpse, da
biblioteca dplyr, como ilustra o código seguinte, que apresenta os atributos típicos que podem ser obtidos
relativamente a um pesquisador específico, o mais antigo docente ainda em exercício na UnB a ter criado seu
registro na plataforma unb.elattes.
```{r}
glimpse(profile[[1]], width = 30)
```

Uma breve inspeção visual dos atributos anteriormente apresentados permite inferir que o pesquisador sob
análise pode ser inferir que o professor da área da engaranharia por formação, tendo geotécnica e fenômenos
de transporte como sua subárea, especialidades em Geotecnia Ambiental e Mineração e Remediação de Áreas
Contaminadas e atualmente trabalha no campus Darcy Ribeiro da UnB com uma senioridade de 8.

**Descrição dos dados de orientações**

Carregando os dados do arquivo de orientação de geotecnia, podemos as seguintes descrições:
```{r}
advise <- fromJSON("Geotecnia/advise.json")
```

Os tipos de orientação que estarão sob análise:
```{r}
names(advise)
```

O período no qual será feita a análise:
```{r}
names(advise$ORIENTACAO_CONCLUIDA_DOUTORADO)
```

A quantidade de orientações de doutorado concluídas em um ano específico (ex. 2016)
```{r}
length(advise$ORIENTACAO_CONCLUIDA_DOUTORADO$`2016`$natureza)
```

Quais os cursos que mais contribuíram com teses concluídas em doutorado em um ano específico (ex. 2017):
```{r}
head(sort(
  table(advise$ORIENTACAO_CONCLUIDA_DOUTORADO$`2017`$curso),
  decreasing = TRUE
), 10)
```

Quais os cursos que mais contribuíram com teses concluídas em mestrado em um ano específico (ex. 2017):
```{r}
head(sort(
  table(advise$ORIENTACAO_CONCLUIDA_MESTRADO$`2017`$curso),
  decreasing = TRUE
), 10)
```

**Descrição dos dados de produção bibliográfica**

Carregando os dados do arquivo de produção bibliográfica de Geotecnia, podemos as seguintes descrições:
```{r}
publication <- fromJSON("Geotecnia/publication.json")
```

Os tipos de produção bibliográfica a serem analisados nessa pesquisa:
```{r}
names(publication)
```

Os tipos de informação que cada periódico contém em um ano especifico (ex. 2012)
```{r}
names(publication$PERIODICO$`2012`)
```

Os periódicos com maior número de publicações para cada programa em um determinado ano (ex. 2017):

```{r}
head(sort(table(publication$PERIODICO$`2017`$periodico), decreasing = TRUE), 10)
```

As editoras com maior número de publicações para cada programa em um determinado ano (ex. 2015):
```{r}
head(sort(
  table(publication$LIVRO$`2015`$nome_da_editora),
  decreasing = TRUE
), 10)
```

## Análise exploratória dos dados
A seguir será mostrado a análise exploratória dos dados nos datasets um entendimento de qualidade mais
profundo da relação estatística existente para os objetivos do projeto.

### Arquivo Perfil

Número de áreas de atuação cumulativo:
```{r}
sum(sapply(profile, function(x)
  nrow(x$areas_de_atuacao)))
```

Número de pessoas por áreas de atuação:
```{r}
table(unlist(sapply(profile, function(x)
  nrow(x$areas_de_atuacao))))
```

Número de pessoas por grande área:
```{r}
table(unlist(sapply(profile, function(x)
  (x$areas_de_atuacao$grande_area))))
```

Número de pessoas que produziram os específicos tipos de produção:
```{r}
table(unlist(sapply(profile, function(x)
  names(x$producao_bibiografica))))
```

Número de publicações por artigo aceito:
```{r}
sum(sapply(profile, function(x)
  length(x$producao_bibiografica$ARTIGO_ACEITO$ano)))
```

Número de publicações por capítulo de livro:
```{r}
sum(sapply(profile, function(x)
  length(x$producao_bibiografica$CAPITULO_DE_LIVRO$ano)))
```

Número de publicações por livro:
```{r}
sum(sapply(profile, function(x)
  length(x$producao_bibiografica$LIVRO$ano)))
```

Número de publicações por periódico:
```{r}
sum(sapply(profile, function(x)
  length(x$producao_bibiografica$PERIODICO$ano)))
```

Número de publicações por texto em jornais:
```{r}
sum(sapply(profile, function(x)
  length(x$producao_bibiografica$TEXTO_EM_JORNAIS$ano)))
```

Número de pessoas por quantitativo de produções por artigo aceito:
```{r}
table(unlist(sapply(profile, function(x)
  length(x$producao_bibiografica$ARTIGO_ACEITO$ano))))
```

Número de pessoas por quantitativo de produções por capítulo de livro:
```{r}
table(unlist(sapply(profile, function(x)
  length(x$producao_bibiografica$CAPITULO_DE_LIVRO$ano))))
```

Número de pessoas por quantitativo de produções por livro:
```{r}
table(unlist(sapply(profile, function(x)
  length(x$producao_bibiografica$LIVRO$ano))))
```

Número de pessoas por quantitativo de produções por periódico:
```{r}
table(unlist(sapply(profile, function(x)
  length(x$producao_bibiografica$PERIODICO$ano))))
```

Número de pessoas por quantitativo de produções por texto em jornais:
```{r}
table(unlist(sapply(profile, function(x)
  length(x$producao_bibiografica$TEXTO_EM_JORNAIS$ano))))
```

Número de produções de artigo aceito por ano:
```{r}
table(unlist(sapply(profile, function(x)
  (x$producao_bibiografica$ARTIGO_ACEITO$ano))))
```

Número de produções de capítulo de livro por ano:
```{r}
table(unlist(sapply(profile, function(x)
  (x$producao_bibiografica$CAPITULO_DE_LIVRO$ano))))
```

Número de produções de livro por ano:
```{r}
table(unlist(sapply(profile, function(x)
  (x$producao_bibiografica$LIVRO$ano))))
```

Número de produções de periódico por ano:
```{r}
table(unlist(sapply(profile, function(x)
  (x$producao_bibiografica$PERIODICO$ano))))
```

Número de produções de texto em jornais por ano:
```{r}
table(unlist(sapply(profile, function(x)
  (x$producao_bibiografica$TEXTO_EM_JORNAIS$ano))))
```

Número de pessoas que realizaram diferentes tipos de orientações:
```{r}
length(unlist(sapply(profile, function(x)
  names(x$orientacoes_academicas))))
```

Número de pessoas por tipo de orientação:
```{r}
table(unlist(sapply(profile, function(x)
  names(x$orientacoes_academicas))))
```

Número de orientações concluídas em mestrado:
```{r}
sum(sapply(profile, function(x)
  length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_MESTRADO$ano)))
```

Número de orientações concluídas em doutorado:
```{r}
sum(sapply(profile, function(x)
  length(
    x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_DOUTORADO$ano
  )))
```

Número de orientações concluídas em pós-doutorado:
```{r}
sum(sapply(profile, function(x)
  length(
    x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_POS_DOUTORADO$ano
  )))
```

Número de pessoas por quantitativo de orientações concluídas em mestrado:
```{r}
table(unlist(sapply(profile, function(x)
  length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_MESTRADO$ano))))
```

Número de pessoas por quantitativo de orientações concluídas em doutorado:
```{r}
table(unlist(sapply(profile, function(x)
  length(
    x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_DOUTORADO$ano
  ))))
```

Número de pessoas por quantitativo de orientações concluídas em pós-doutorado:
```{r}
table(unlist(sapply(profile, function(x)
  length(
    x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_POS_DOUTORADO$ano
  ))))
```

Número de orientações em mestrado por ano:
```{r}
table(unlist(sapply(profile, function(x)
  (x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_MESTRADO$ano))))
```

Número de orientações em doutorado por ano:
```{r}
table(unlist(sapply(profile, function(x)
  (
    x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_DOUTORADO$ano
  ))))
```

Número de orientações em pós-doutorado por ano:
```{r}
table(unlist(sapply(profile, function(x)
  (
    x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_POS_DOUTORADO$ano
  ))))
```

### Arquivo Publicação
Criando um data-frame com todos os anos:
```{r}
publication.df <- data.frame()
for (i in 1:length(publication[[1]]))
  publication.df <-
  rbind(publication.df, publication$PERIODICO[[i]])
glimpse(publication.df)
```

Limpando o data-frame de listas:
```{r}
publication.df$autores <-
  gsub("\",\"|\", \"", "; ", publication.df$autores)
publication.df$autores <-
  gsub("\"|c\\(|\\)", "", publication.df$autores)
publication.df$`autores-endogeno` <-
  gsub(",", ";", publication.df$`autores-endogeno`)
publication.df$`autores-endogeno` <-
  gsub("\"|c\\(|\\)", "", publication.df$`autores-endogeno`)
glimpse(publication.df)
```

### Arquivo Orientação

Reunir todos os anos e orientações concluidas em um mesmo data-frame:
```{r}
advise.tipo.df <- data.frame()
advise.df <- data.frame()
for (i in 1:length(advise[[1]]))
  advise.tipo.df <-
  rbind(advise.tipo.df, advise$ORIENTACAO_CONCLUIDA_POS_DOUTORADO[[i]])
advise.df <-
  rbind(advise.df, advise.tipo.df)
advise.tipo.df <- data.frame()
for (i in 1:length(advise[[1]]))
  advise.tipo.df <-
  rbind(advise.tipo.df, advise$ORIENTACAO_CONCLUIDA_DOUTORADO[[i]])
advise.df <-
  rbind(advise.df, advise.tipo.df)
advise.tipo.df <- data.frame()
for (i in 1:length(advise[[1]]))
  advise.tipo.df <-
  rbind(advise.tipo.df, advise$ORIENTACAO_CONCLUIDA_MESTRADO[[i]])
advise.df <- rbind(advise.df, advise.tipo.df)
glimpse(advise.df)
```

Numero de orientações por ano:
```{r}
table(advise.df$ano)
```

Tabela com nome de professor e numero de orientações:
```{r}
head(sort(table(rbind(
  advise.df$ori1, advise.df$ori2
)), decreasing = TRUE), 20)
```

## Verificação da qualidade dos dados
Com os dados coletados na seção 2.3 tem-se que os dados para serem submetidos a uma análise apresentam
uma qualidade satisfatória para resolver os problemas propostos.

\newpage
# Fase 3 - Preparação dos Dados

Nessa fase são realizadas 5 atividades genéricas para de preparação dos dados

## Seleção dos dados.

Para a principal utilização dos dados foram definidos os dataframes advise, que contém informações de qual a
natureza da pesquisa produzida, qual aluno produziu, seus respectivos orientadores, o ano e etc. A seguir foi
definido os dados importantes do arquivo profile.json, gerando o mais dataframes, chamados de profile, que já
está limpo, com as principais colunas definidas.

## Limpeza dos dados

Nessa etapa se anexa com a próxima etapa a construção dos dados. Durante a construção, foi realizada uma
limpeza dos dados.

## Construção dos dados

Na etapa construção dos dados é realizada criação de novas variáveis a partir de outras presentes nos datasets
para anáslise.
```{r}
profile.df <- profile.df.professores %>% 
  select(idLattes, nome, resumo_cv, senioridade) %>% 
  left_join(
    profile.df.orientacoes %>% 
      select(orientacao, idLattes) %>% 
      filter(!grepl("EM_ANDAMENTO", orientacao)) %>% 
      group_by(idLattes) %>% 
      count(orientacao) %>% 
      spread(key = orientacao, value = n), 
    by = "idLattes") %>% 
  left_join(
    profile.df.publicacoes %>% 
      select(tipo_producao, idLattes) %>% 
      filter(!grepl("ARTIGO_ACEITO", tipo_producao)) %>% 
      group_by(idLattes) %>% 
      count(tipo_producao) %>% 
      spread(key = tipo_producao, value = n), 
    by = "idLattes") %>% 
  left_join(
    profile.df.areas.de.atuacao %>% 
      select(area, idLattes) %>% 
      group_by(idLattes) %>% 
      summarise(num_areas = n_distinct(area)), 
    by = "idLattes")
glimpse(profile.df)
```

## Integração dos dados
Não havia necessidade de realizar integração entre os dados, somente realizada a construção dos dataframes
como descrito na etapa 3.3.

## Formatação dos dados
A formatação dos dados já foi realizada nas etapas anteriores.Para esses casos mais simples, a formatação
será realizada conforme a necessidade.

\newpage
# Fase 4 - Modelagem
Com os dados preparados, na fase de modelagem várias técnicas de modelagem são selecionadas e aplicadas e
seus parâmetros são calibrados. Usualmente, mais de uma técnica pode ser aplicado ao conjunto de dados
disponível, ou uma técnica requer um formato específico dos dados, necessitando nova preparação dos dados.
Uma estrategia comum é dividir o conjunto de dados, utilizando uma porção dos dados para o desenvolvimento
do modelo e outra para o teste do modelo obtido. Em alguns casos, utiliza-se uma terceira porção dos dados
para validação.

## Análise de Redes
A Análise de Redes é a área de tecnologia da informação e das ciências sociais que trata do processo de
analisar qualquer tipo de rede por meio da teoria das redes. As redes podem ser social, de transporte ou
tecnológicas, como a internet.

```{r}
colnames(geotecnia_nodes) <- c("IdLattes",
                               "Index",
                               "Docente")
kable(geotecnia_nodes[, c(2, 1, 3)], caption = "Tabela de referência da análise de redes")
```

\newpage
O grafo ilustra que todos os 12 pesquisadores trabalham em conjunto, nenhum trabalha sozinho
```{r}
igraph <-
  graph_from_data_frame(geotecnia_relations,
                        directed = TRUE,
                        vertices = geotecnia_nodes)
plot(igraph)
```

\newpage
O grafo ilustra o número de colaborações de cada pesquisador pelo tamanho do nó relacionado a seu docente da
tabela de autores:
```{r}
plot(
  g,
  vertex.size = V(g)$degree * 1.5,
  vertex.label = geotecnia_nodes$label,
  layout = layout_nicely(g),
  vertex.label.cex = 0.6
)
```

\newpage
O grafo ilustra o número de publicações de cada autor pelo tamanho do nó relacionado a seu docente da
tabela de autores:
```{r}
plot(
  g,
  vertex.size = na.omit(round(V(g)$publicacao / 7) * 3),
  vertex.label = geotecnia_nodes$label,
  layout = layout_nicely(g),
  vertex.label.cex = 0.6
)
```

\newpage
O grafo ilustra as comunidades entre os autores com agrupamentos no grafo por cores:
```{r}
kc = fastgreedy.community(g)
plot(kc,
     g,
     vertex.label = geotecnia_nodes$label,
     layout = layout_nicely(g))
```

Podemos concluir com a análise das redes do programa de pós-graduação em Geotecnia é interessante notar facilmente há uma colaboração entre todos pesquisadores.

\newpage
# Fase 5 - Avaliação
A fase de avaliação consiste na verificação de questões em relação aos datasets que ainda não foram abordadas
o suficiente. Dessa forma, consiste em uma análise mais "profunda", por assim dizer, dos dados em questão.
A avaliação foi realizada de forma gráfica, sendo apresentados a seguir:
## Avaliação dos resultados

### Arquivo Perfil

O gráfico ilustra a quantidade de professores por grande área de atuação (em forma de colunas):
```{r fig.align='center', out.width = '60%'}
profile %>%
  sapply(function(x)
    unique(x$areas_de_atuacao$grande_area)) %>%
  unlist() %>% table() %>% sort() %>% as.data.frame() %>% filter(!. == "") %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "green4",
                                          alpha = 0.8,
                                          width = 0.8) + coord_flip() + geom_text(aes(label = Freq),
                                                                                  hjust = -0.2,
                                                                                  vjust = 0.5,
                                                                                  size = 3.5) +
  labs(title = "Número de Pessoas por Grande Área Atuação", y = "Quantidade", x =
         "Grande Área") + theme_bw() + scale_y_continuous() +
  scale_x_discrete(
    labels = c(
      'CIENCIAS_DA_SAUDE' = 'Ciências da Saúde',
      'CIENCIAS_BIOLOGICAS' = 'Ciências Biológicas',
      'CIENCIAS_HUMANAS' = 'Ciências Humanas',
      "CIENCIAS_EXATAS_E_DA_TERRA" = "Ciências Exatas e da Terra",
      "CIENCIAS_SOCIAIS_APLICADAS" = "Ciências Sociais Aplicadas",
      "CIENCIAS_AGRARIAS" = "Ciências Agrárias",
      "OUTROS" = "Outros",
      "ENGENHARIAS" = "Engenharias",
      "LINGUISTICA_LETRAS_E_ARTES" = "Linguística, Letras e Artes"
    )
  )
```

O gráfico ilustra a quantidade de professores por grande área de atuação (em forma de pizza):
```{r fig.align='center'}
ggplot(grande_areas_atuacao, aes(x = "", y = Quantidade, fill = GrandeAreas)) +
  geom_bar(width = 1, stat = "identity") +
  coord_polar("y", start = 0, direction = -1) +
  labs(title = "Número de Pessoas por Grande Área Atuação") +
  geom_text(
    data = grande_areas_atuacao,
    aes(
      x = "",
      y = Quantidade,
      label = paste(Porcentagem, "%")
    ),
    position = position_stack(vjust = 0.5),
    size = 3
  )
```

Com os graficos podemos observar que todos os 12 professores são da grande área de engenharias e apenas 29\% dos professores são de outras grandes áreas.

\newpage O gráfico ilustra a quantidade de professores por área de atuação (em forma de colunas):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    unique(x$areas_de_atuacao$area)) %>%
  unlist() %>% table() %>% sort() %>% as.data.frame() %>% filter(!. == "") %>% tail(20) %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "green4",
                                          alpha = 0.8,
                                          width = 0.8) + coord_flip() +
  labs(title = "Número de Pessoas por Área Atuação", x = "Área de atuação", y =
         "Quantidade") +
  geom_text(aes(label = Freq),
            hjust = -0.2,
            vjust = 0.3,
            size = 3.5) +
  scale_y_continuous(limits = c(0, 800)) + theme_bw()
```

\newpage O gráfico ilustra a quantidade de professores por área de atuação (em forma de pizza):
```{r fig.align='center'}
ggplot(areas_atuacao, aes(x = "", y = Quantidade, fill = Areas)) +
  geom_bar(width = 1, stat = "identity") +
  coord_polar("y", start = 0, direction = -1) +
  labs(title = "Número de Pessoas por Área Atuação") +
  geom_text(
    data = areas_atuacao,
    aes(
      x = "",
      y = Quantidade,
      label = paste(Porcentagem, "%")
    ),
    position = position_stack(vjust = 0.5),
    size = 3
  )
```

Com os graficos podemos observar que todos os 12 professores são da área de engenharia civil e apenas 37\% dos professores são de outras áreas.

\newpage O gráfico ilustra a quantidade de professores por sub área de atuação (em forma de colunas):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    unique(x$areas_de_atuacao$sub_area)) %>%
  unlist() %>% table() %>% sort() %>% as.data.frame() %>% filter(!. == "") %>% tail(30) %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "green4",
                                          alpha = 0.8,
                                          width = 0.8) + coord_flip() +
  geom_text(aes(label = Freq),
            hjust = -0.2,
            vjust = 0.3,
            size = 3.5) +
  labs(title = "Número de Pessoas por Sub Área atuação", x = "Sub Área", y =
         "Quantidade") +
  scale_y_continuous(limits = c(0, 300)) + theme_bw()
```

\newpage O gráfico ilustra a quantidade de professores por grande área de atuação (em forma de pizza):
```{r fig.align='center'}
ggplot(subarea, aes(x = "", y = Quantidade, fill = Subarea)) +
  geom_bar(width = 1, stat = "identity") +
  coord_polar("y", start = 0, direction = -1) +
  labs(title = "Número de Pessoas por Sub Área atuação") +
  geom_text(
    data = subarea,
    aes(
      x = "",
      y = Quantidade,
      label = paste(Porcentagem, "%")
    ),
    position = position_stack(vjust = 0.5),
    size = 3
  )
```

Com os graficos podemos observar que todos os 12 professores são da grande área de engenharias e apenas 14\% dos professores são de outras sub áreas.

\newpage O gráfico ilustra a quantidade de professores por especialidade (em forma de colunas):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    unique(x$areas_de_atuacao$especialidade)) %>%
  unlist() %>% table() %>% sort() %>% as.data.frame() %>% filter(!. == "") %>% tail(29) %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "green4",
                                          alpha = 0.8,
                                          width = 0.8) + coord_flip() +
  labs(title = "Número de Pessoas por Especialidade", x = "Especialidade", y =
         "Quantidade") +
  geom_text(aes(label = Freq),
            hjust = -0.2,
            vjust = 0.3,
            size = 3.0) +
  theme_bw() +
  scale_y_continuous(limits = c(0, 150))
```

\newpage O gráfico ilustra a quantidade de professores por especialidade (em forma de pizza):
```{r fig.align='center'}
ggplot(especialidades_frequentes, aes(x = "", y = Quantidade, fill = Especialidade)) +
  geom_bar(width = 1, stat = "identity") +
  coord_polar("y", start = 0, direction = -1) +
  labs(title = "Número de Pessoas por Especialidade") +
  geom_text(
    data = especialidades_frequentes,
    aes(
      x = "",
      y = Quantidade,
      label = paste(Porcentagem, "%")
    ),
    position = position_stack(vjust = 0.5),
    size = 3
  )
```

Com os graficos podemos observar que 21\% professores tem especialidade em Obras de Terra ou Enrocamento e Fundações e Escavações e apenas 58\% dos professores tem outras especialidade.

\newpage O gráfico ilustra a quantidade de professores por quantitativo de grande áreas (em forma de barras):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    length(unique(x$areas_de_atuacao$grande_area))) %>%
  unlist() %>% table() %>% sort() %>% rev() %>% as.data.frame() %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "orange", alpha = 0.9) +
  geom_text(aes(label = Freq), size = 3.5, vjust = -1) +
  labs(title = "Número de Pessoas por Quantitativo de Grande Áreas",
       y = "Número de Pessoas", x = "Quantitativo de Grande Áreas") + theme_bw()
```

Podemos observar que tem uma contagem de 8 perfis nas grandes áreas.

\newpage O gráfico ilustra a quantidade de professores por quantitativo de áreas (em forma de barras):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    length(unique(x$areas_de_atuacao$area))) %>%
  unlist() %>% table() %>% sort() %>% rev() %>% as.data.frame() %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "orange", alpha = 0.9) +
  geom_text(aes(label = Freq), size = 3.5, vjust = -1) +
  labs(title = "Número de Pessoas por Quantitativo de Áreas",
       y = "Número de Pessoas", x = "Quantitativo de Áreas") + theme_bw()
```

Podemos observar que tem uma contagem de 7 perfis nas áreas.

\newpage O gráfico ilustra a quantidade de professores por quantitativo de sub-áreas (em forma de barras):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    length(unique(x$areas_de_atuacao$sub_area))) %>%
  unlist() %>% table() %>% sort() %>% rev() %>% as.data.frame() %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "orange", alpha = 0.9) +
  geom_text(aes(label = Freq), size = 3.5, vjust = -1) +
  labs(title = "Número de Pessoas por Quantitativo de Sub Áreas",
       y = "Número de Pessoas", x = "Quantitativo de Sub Áreas") + theme_bw()
```

Podemos observar que tem uma contagem de igual de 4 perfis nas sub áreas.

\newpage O gráfico ilustra a quantidade de professores por quantitativo de especialidades (em forma de barras):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    length(unique(x$areas_de_atuacao$especialidade))) %>%
  unlist() %>% table() %>% sort() %>% rev() %>% as.data.frame() %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "orange") +
  geom_text(aes(label = Freq), size = 3.5, vjust = -1) +
  labs(title = "Número de Pessoas por Quantitativo de Especialidades",
       y = "Número de Pessoas", x = "Quantitativo de Especialidades") + theme_bw()
```

Podemos observar que tem uma contagem de igual de 4 perfis por especialidades

\newpage O gráfico ilustra a quantidade de artigos publicados por quantitativo de professores (em forma de colunas):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    length(x$producao_bibiografica$PERIODICO$ano)) %>%
  unlist() %>% table()   %>% rev() %>% as.data.frame() %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "green4", width = 0.6) +
  labs(title = "Número de Artigos Publicados por Quantitativo de pessoas", y = "Pessoas", x = "Publicações") +
  theme_bw() + coord_flip()
```

Podemos observar que tem uma contagem de 2 perfis já publicaram 26 artigos e só um conseguiu publicar 32 artigos.

\newpage O gráfico ilustra a quantidade de capítulo publicados por quantitativo de professores (em forma de colunas):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    length(x$producao_bibiografica$CAPITULO_DE_LIVRO$ano)) %>%
  unlist() %>% table() %>% rev() %>% as.data.frame() %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "green4", width = 0.8) + coord_flip() +
  labs(title = "Número de Capítulos de Livros por Quantitativo de pessoas", y = "Pessoas", x = "Publicações") +
  scale_x_discrete() + theme_bw() + geom_text(aes(label = Freq),
                                              hjust = -0.3,
                                              vjust = 0.3,
                                              size = 3.1) + scale_y_continuous(limits = c(0, 500))
```

Podemos observar que tem uma contagem de 2 perfis já publicaram capitulos de livros e 3 não conseguiram publica capitulo de livros.

\newpage O gráfico ilustra a quantidade de livros publicados por quantitativo de professores (em forma de colunas):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    length(x$producao_bibiografica$LIVRO$ano)) %>%
  unlist() %>% table() %>% rev() %>% as.data.frame() %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "green4", width = 0.5) + coord_flip() +
  labs(title = "Número de Livros por Quantitativo de pessoas", y = "Pessoas", x = "Publicações") +
  theme_bw() + geom_text(aes(label = Freq),
                         hjust = -0.3,
                         vjust = 0.3,
                         size = 3.1) + scale_y_continuous(limits = c(0, 400))
```

Podemos observar que tem uma contagem de 4 perfis já publicaram 1 livro e 3 não conseguiram publica livro.

\newpage O gráfico ilustra quantidade de orientações de mestrado por quantitativo de professores (em forma de colunas):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_MESTRADO$ano)) %>%
  unlist() %>% table() %>% rev() %>% as.data.frame() %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "blue4", width = 0.5) + coord_flip() +
  labs(title = "Número de Orientações de Mestrado por Quantitativo de pessoas",
       y = "Pessoas", x = "Orientações") + scale_y_continuous(limits = c(0, 400)) +
  theme_bw() +
  geom_text(aes(label = Freq),
            hjust = -0.3,
            vjust = 0.3,
            size = 3.1)
```

Podemos observar que tem uma contagem de 2 perfis já tiveram 15 orientações de mestrado.

\newpage O gráfico ilustra a quantidade de orientações de doutorado por quantitativo de professores (em forma de colunas):
```{r fig.align='center'}
profile %>%
  sapply(function(x)
    length(
      x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_DOUTORADO$ano
    )) %>%
  unlist() %>% table() %>% rev() %>% as.data.frame() %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "blue", width = 0.5) + coord_flip() +
  labs(title = "Número de Orientações de Doutorado por Quantitativo de pessoas",
       y = "Pessoas", x = "Orientações") + scale_y_continuous(limits = c(0, 300)) +
  theme_bw() +
  geom_text(aes(label = Freq),
            hjust = -0.3,
            vjust = 0.3,
            size = 3.1)
```

Podemos observar que tem uma contagem de 2 perfis já tiveram 8 orientações de doutorado

\newpage O gráfico ilustra a quantidade de orientações de pós-doutorado por quantitativo de professores(em forma de colunas):
```{r fig.align='center'}
profile %>%
  sapply(
    function(x)
      length(
        x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_POS_DOUTORADO$ano
      )
  ) %>%
  unlist() %>% table() %>% rev() %>% as.data.frame() %>%
  ggplot(aes(x = ., y = Freq)) + geom_col(fill = "blue", width = 0.5) + coord_flip() +
  labs(title = "Número de Orientações de Pós-Doutorado por Quantitativo de pessoas",
       y = "Pessoas", x = "Orientações") + scale_y_continuous(limits = c(0, 200)) +
  theme_bw() +
  geom_text(aes(label = Freq),
            hjust = -0.3,
            vjust = 0.3,
            size = 3.1)
```

Podemos observar que tem uma contagem de 2 perfis já tiveram 2 orientações de pós-doutorado e 8 perfis não tiveram.

\newpage O gráfico ilustra as as relações de Orientações Concluídas e Publicações:
```{r fig.align='center'}
profile.areas %>%
  select(-sub_area, -especialidade) %>%
  distinct() %>%
  group_by(publicacoes) %>%
  ggplot(aes(publicacoes, orientacoes_concluidas, color = area)) +
  geom_point(shape = 2, size = .8) + geom_jitter(shape = 2, size = .8) +
  ggtitle('Relação de Orientações Concluídas e Publicações') +
  labs(x = 'Publicações', y = 'Orientações concluídas') + facet_wrap(. ~ grande_area, ncol = 2)
```

\newpage O gráfico ilustra a natureza das orientações por tipo de orientação (em forma de pontos):
```{r fig.align='center'}
profile.df.orientacoes <- extrai.orientacoes(profile) %>%
  select(id_lattes_orientadores, natureza, ano, orientacao, everything()) %>%
  mutate(Status = ifelse(grepl("CONCLUIDA", orientacao), "Concluída", "Em andamento")) %>%
  mutate(Natureza = case_when(grepl("MESTRADO", str_to_upper(natureza)) ~ "Mestrado",
                              grepl("PÓS-DOUTORADO", str_to_upper(natureza)) ~ "Pós-doutorado",
                              grepl("DOUTORADO", str_to_upper(natureza)) ~ "Doutorado",
                              grepl("INICIACAO", str_to_upper(natureza)) ~ "Iniciação Científica",
                              grepl("INICIAÇÃO", str_to_upper(natureza)) ~ "Iniciação Científica",
                              TRUE ~ "Outras naturezas"))

profile.df.orientacoes %>% group_by(ano, Status) %>%
  ggplot(aes(x = ano, y = Status, color = Status)) +
  labs(title = "Natureza das orientações por tipo de orientação") +
  geom_point(shape = 1) + geom_jitter(shape = 1) + facet_wrap(. ~ Natureza)
```

\newpage O gráfico ilustra a quantidade publicações de capítulos de livros por ano/país (em forma de pontos):
```{r fig.align='center'}
profile.df.publicacoes %>%
  filter((tipo_producao %in% c('LIVRO', 'CAPITULO_DE_LIVRO'))) %>%
  group_by(tipo_producao, pais_de_publicacao) %>%
  ggplot(aes(ano, tipo_producao, col = pais_de_publicacao)) +
  labs(title = "Número de Publicações de capítulos de livros por ano/país") +
  geom_point(alpha = 0.7) + geom_jitter() +
  labs(x = 'Tipo de produção', y = 'País')
```

\newpage 
### Arquivo Publicação

O gráfico ilustra a quantidade de publicações por ano (em forma de barras):
```{r fig.align='center'}
publication.periodico.df %>%
  ggplot(aes(x = ano)) + geom_bar(aes(fill = ano)) +
  geom_text(stat = "count", aes(label = formatC(..count.., big.mark = ",")), vjust =
              -0.1) +
  theme_bw() + labs(title = "Publicações por ano", x = "Ano", y = "Quantidade de Periódicos") +
  scale_y_continuous(labels = comma)
```

Podemos observar teve um crescimento alto de periódicos em 2016, mas teve muito decrescimento na quantidade em 2018.

\newpage O gráfico ilustra as 20 revistas publicadas mais publicadas:
```{r fig.align='center'}
publication.periodico.df %>% select(periodico) %>% table() %>% as.data.frame() %>% arrange(desc(Freq)) %>%
  head(20) %>% ggplot(aes(x = reorder(., (Freq)), y = Freq)) + geom_col(fill = "red4") + coord_flip() +
  labs(title = "Os 20 Periódicos com Maior Publicações",
       y = "Número de Publicações", x = "Revistas") + geom_text(
         aes(label = comma(Freq)),
         hjust = -0.2,
         vjust = 0.3,
         size = 3.5
       ) + theme_bw() +
  scale_y_continuous(limits = c(0, 400))
```

Podemos observar que revistas International Journal of Geomechanics e The Electronic Journal of Geotechnical Engineering são as mais publicas.

\newpage O gráfico ilustra a quantidade de publicações de livros em países estrangeiros (em forma de colunas):
```{r fig.align='center'}
publication.livros.df %>%
  group_by(pais_de_publicacao) %>%
  summarise(Quantidade = n()) %>%
  filter(pais_de_publicacao != "Brasil") %>%
  ggplot(aes(x = reorder(pais_de_publicacao, (Quantidade)), y = Quantidade)) +
  geom_col(fill = "coral") + geom_text(
    aes(label = comma(Quantidade)),
    hjust = -0.2,
    vjust = 0.3,
    size = 3.5
  ) + coord_flip() +
  labs(title = "Publicações de Livros em Países Estrangeiros", x = "Países", y = "Quantidade de Livros") +
  theme_bw()
```

Podemos observar só tivaram publicações de livros no México e espanha.

\newpage O gráfico ilustra a quantidade de publicações de livros no Brasil (em forma de pontos):
```{r fig.align='center'}
publication.livros.df %>%
  filter(
    pais_de_publicacao %in% c(
      "Brasil",
      "Estados Unidos",
      "Holanda",
      "Grã-Bretanha",
      "Alemanha",
      "Suiça"
    )
  ) %>%
  group_by(ano, pais_de_publicacao) %>%
  ggplot(aes(x = ano, y = pais_de_publicacao, color = pais_de_publicacao)) +
  xlab("Ano") + ylab("País") + geom_point() + geom_jitter() +
  labs(color = "País de Publicações")
```

\newpage O gráfico ilustra a quantidade de participação de eventos de livros em países estrangeiros (em forma de colunas):
```{r fig.align='center'}
publication.eventos.df %>%
  group_by(pais_do_evento) %>%
  summarise(Quantidade = n()) %>%
  filter(pais_do_evento != "Brasil") %>%
  ggplot(aes(x = reorder(pais_do_evento, (Quantidade)), y = Quantidade)) +
  geom_col(fill = "coral3") + geom_text(
    aes(label = comma(Quantidade)),
    hjust = -0.2,
    vjust = 0.3,
    size = 2.5
  ) + coord_flip() +
  labs(title = "Participação de Eventos em Países Estrangeiros", x = "Países", y = "Quantidade de Livros") +
  theme_bw()
```

Podemos observar as participações de eventos de livros ocorreu na Colômbia.

\newpage 
### Arquivo Orientação


O gráfico ilustra a quantidade de orientações por ano (em forma de barras):
```{r}
orient.df %>%
  ggplot(aes(x = ano)) + geom_bar(aes(fill = ano)) +
  geom_text(stat = "count", aes(label = formatC(..count.., big.mark = ",")), vjust =
              -0.1) +
  theme_bw() + labs(title = "Orientações por ano", x = "Ano", y = "Quantidade de Periódicos") +
  scale_y_continuous(labels = comma)
```

Podemos observar teve um crescimento alto de orientações em 2016, mas teve decrescimento muito baixo em 2018.

\newpage 
O gráfico ilustra a quantidade de orientações completas por ano (em forma de barras):
```{r fig.align='center'}
ggplot(orient.df, aes(ano, fill = factor(natureza))) +
  geom_bar(stat = "count", position = "dodge") +
  ggtitle("Natureza das Orientações Completas Por Ano") +
  theme(legend.position = "right", legend.text = element_text(size = 7)) +
  guides(fill = guide_legend(
    nrow = 5,
    byrow = TRUE,
    title.position = "top"
  )) +
  labs(x = "Ano", y = "Quantidade") + labs(fill = "Natureza") + theme_bw() +
  geom_text(
    hjust = 0.6,
    vjust = -0.4,
    size = 3,
    color = 'black',
    position = position_dodge(width = 0.9),
    stat = "count",
    aes(
      group = factor(natureza),
      label = formatC(..count.., big.mark = ",")
    ), check_overlap = TRUE)
```

Podemos observar teve um crescimento alto de dissertação de mestrado e tese de doutorado em 2016 e pouca supervisão de pós-doutorado.

\newpage O gráfico ilustra a quantidade de orientações completas por ano (em forma de linhas e pontos):
```{r fig.align='center'}
ggplot(orient_sum, aes(
  x = ano,
  y = n,
  group = natureza,
  color = natureza
)) +
  geom_line(alpha = 0.6) +
  geom_point(alpha = 0.6)
```

## Revisão do processo

Por meio das análises realizadas nas seções anteriores, tem-se que a modelagem de análise com os modelos estatísticos foram adequados para esse projeto, uma vez que permitiu a obtenção de resultados não triviais em relação aos dois programas de pós-graduação analisados.

Tem-se ainda que os modelos e os datasets em que se aplicaram os modelos nesse relatório são facilmente verificáveis e replicáveis por meio da leitura desse documento. 

\newpage
# Fase 6 - Implantação (deployment)

Na fase de implantação, realiza-se o planejamento da implantação dos scripts desenvolvidos para o ambiente operacional.
Os scripts desenvolvidos nesse trabalho permitem uma análise de dados do programa de pós-graduação sob outros pontos de vista, que podem trazer estatísticas e relações não triviais.

# Conclusão

Esse trabalho mostrou uma forma de analisar dados de arquivos .json utilizando as técnicas da CRISP-DM. Dessa forma foi possível aprender sobre a ciência de dados e as possíveis análises que ela pode proporcionar; como os dados devem ser preparados; como deve-se buscar informações úteis e analisa-las; como gerar gráficos visualmente mais adequados, usa tecnicas grafos para analíse de redes e a dificuldade que a falta de padronização pode causar, principalmente quando existem diversos arquivos para analisar de diferentes fontes.

Tendo como base modelo do relatório disponibilizados no aprender UnB da disciplina e implementando os scripts em R com técnicas de analise de redes com igraph e manipulação de dados em R, análise crítica das melhores formas de gerar os gráficos de acordo com os tipos de dados, foi possível fazer uma analise de dados dos datasets de Geotecnia seguindo as 6 fases do CRISP-DM.

Por fim, os resultados obtidos podem ser considerados relevantes e bem-sucedidos para o conjunto de dados, e os resultados são coerentes ao comparar as pontuações de avaliação quadrienal, que colocam o programa Geotecnia como um programa nota 6 que possui um número alto de publicações acadêmicas e orientações acadêmicas.

# Referências
